<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head th:include="include :: header"></head>
<body class="gray-bg">
<div class="wrapper wrapper-content ">
	<div class="row">
		<div class="col-sm-12">
			<div class="ibox float-e-margins">
				<div class="ibox-content">
					<form class="form-horizontal m-t" id="reportForm">
						<input id="reportId" type="hidden" th:value="${report.Id}">
						<div class="form-group">
							<div class="col-sm-12">
								<h3 style="text-align: center">
									<span th:text="${report.title}"></span>
								</h3>
							</div>
						</div>
						<div class="form-group" style="margin:20px">
							<label class="control-label" style="float: left">快捷初始化：</label>
							<div class="col-sm-3">
								<button  type="button" class="btn btn-info" onclick="getLastReport()">加载最近周周报</button>
							</div>
							<button class="btn  btn-success" onclick="clearAll()" type="button">清空
							</button>
							<button id="upload" onclick="uploadFiles()" type="" class="btn btn-default" style="float: right"><i class="fa fa-cloud"></i>上传附件</button>
						</div>

						<div class="form-group" style="margin:20px">
							<h3>上周计划</h3>
							<textarea class="col-sm-12 form-control" rows="3" id="lastPlan" th:text="${reportContent.lastPlan}"></textarea>
						</div>
						<div class="form-group" style="margin:20px">
							<h3>本周总结<label style="color:red;">（不少于50字）</label></h3>
							<textarea class="col-sm-12 form-control" rows="5" id="summary"  th:text="${reportContent.summary}"></textarea>
							<span id="textarea-tip" style="float: right;padding-top: 5px"></span>
						</div>
						<div class="form-group" style="margin:20px">
							<h3>下周计划</h3>
							<textarea class="col-sm-12 form-control" rows="3" id="nextPlan" th:text="${reportContent.nextPlan}"></textarea>
						</div>
						<div class="form-group" style="margin:20px">
							<h3>问题反馈</h3>
							<textarea class="col-sm-12 form-control" rows="3" id="problem" th:text="${reportContent.problem}"></textarea>
						</div>
						<div class="form-group" style="margin:20px">
							<div class="col-sm-6" style="float: right">
								<div class="columns pull-right">
									<button class="btn  btn-success" onclick="saveReport()" type="button">
										保存
									</button>
									<button class="btn  btn-primary" onclick="submitReport()" type="button">
										提交
									</button>
								</div>
							</div>
						</div>

					</form>
				</div>
			</div>
		</div>
	</div>
</div>
<div th:include="include::footer"></div>
<script type="text/javascript" src="/js/appjs/bio/report/edit.js" th:src="@{/js/appjs/bio/report/edit.js}" >

</script>


<script th:inline="javascript">
	var prefix = document.getElementsByTagName('meta')['ctx'].content + "/bio/report"
	//console.log([[${report}]])
	$(document).ready(function() {
						//使用最近周报
						$('#usepreviousweek').on('click', function(e){
							var markupStr = $("#summernote").val();

						/*	$.ajax({
								url : prefix + "/latest/" + $("#id").val(),
								type : "get",
								success : function(r) {
									if (r.code == 0) {
										$('#summernote').summernote('code', markupStr + r.data.content );
										layer.msg("获取到周报内容，并初始化成功！");
									} else {
										layer.msg("没有获取到对应的历史周报信息！");
									}
								}
							});*/


						});
					});
</script>

</body>
</html>
